<% title "CSV Import", false %>

<div class="row">
  <div class="col-md-12">
    <%= form_with :model => resource_class, :url => do_import_path, :method => :post, :html => { :id => "csv_form_upload", :novalidate => true } do |f| %>
      <div class="zcard">
        <section class="z-card-primary">
          <h4 class="z-card-title">CSV Import</h4>
        </section>
        <section class="z-card-content">
          <p>Only CSV file can be used to import records. The first row should be the column name. The following columns are allowed.</p>
          <ul>
            <% resource_fields.each do |k, v| %>
              <li>
                <strong><%= k.to_s %></strong> : <%= v.titleize %> type
              </li>
            <% end %>
          </ul>
          <div>
            <div class="form-group">
              <%= f.file_field :file, :accept => '.csv', :multiple => false, :data => { csv_input: true }, :class => "hide" %>
            </div>
          </div>
        </section>
        <section class="z-card-actions">
          <%= f.submit "Import File", :class => "btn btn-outline-info", :disabled => true, :id => "csv-btn" %>
          <%= link_to "Admin Page", admin_root_path, :class => "btn btn-outline-primary" %>
        </section>
      </div>
    <% end %>
  </div>
</div>

<div id="imported_records"></div>
